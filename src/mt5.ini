[mt5]
name=mt5
image=quay.io/toolbx/ubuntu-toolbox:24.04
additional_flags='--env http_proxy=http://0.0.0.0:3142'
additional_packages="git vim tmux byobu ssh yadm direnv autojump systemd libpam-systemd wine-stable-amd64 winetricks python3 python3-pip"
pull=true
volume=/usr/src:/usr/src:Z
volume=/srv/homes:/srv/homes:Z
unshare_all=false
init_hooks="apt-get update; apt-get upgrade -y ; apt-get clean y"
init_hooks="groupadd -g 1001 dev ; useradd -m -g 1001 -u 1001 -d /srv/homes/dev -s /bin/bash dev"
init_hooks="usermod -aG src $USER"
init_hooks="usermod -aG dev $USER"
init_hooks="cd /tmp; wget https://download.mql5.com/cdn/web/metaquotes.software.corp/mt5/mt5ubuntu.sh ; chmod +x mt5ubuntu.sh ; ./mt5ubuntu.sh"
init_hooks="pip3 install flask flask-restful MetaTrader5 pandas jinja2"
init_hooks="mkdir -p /srv/homes/dev/paia/trade/metatrader-mcp/result/manual/tuning"
init_hooks="cd /srv/homes/dev/paia/trade/metatrader-mcp && git init && git add . && git commit -m 'Initial commit: MT5 MCP server, Flask API, and automation setup'"
init_hooks="nohup python3 /srv/homes/dev/paia/trade/metatrader-mcp/src/mt5_flask_api.py &"
exported_apps="wine-extension-mt5.desktop"
